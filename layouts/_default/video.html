{{ define "main" }}
<!-- Google Fonts import -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Petrona:wght@400;500;700&family=Rosarivo:wght@400;700&family=Asul&display=swap">

<style>
    /* CSS Variables matching the original design */
    :root {
        /* Colors */
        --color-base: #fdf5ea;
        --color-contrast: #6d3a17;
        --color-accent-1: #f7ebdb;
        --color-accent-2: #e69b55;
        --color-accent-3: #c4886e;
        --color-accent-4: #686868;
        --color-accent-5: #FBFAF3;
        
        /* Typography */
        --font-primary: 'Petrona', serif;
        --font-heading-1: 'Rosarivo', serif;
        --font-heading-2: 'Asul', sans-serif;
        --font-size-small: 0.8rem;
        --font-size-medium: 1rem;
        --font-size-large: 1.2rem;
        --font-size-x-large: 1.6rem;
        
        /* Spacing */
        --spacing-sm: 10px;
        --spacing-md: 20px;
        --spacing-lg: 30px;
        --spacing-xl: clamp(30px, 5vw, 50px);
    }
    
    body {
        font-family: var(--font-primary);
        font-size: var(--font-size-medium);
        line-height: 1.6;
        color: var(--color-contrast);
        background-color: var(--color-base);
    }
    
    .transcript-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: var(--spacing-xl);
    }
    
    h1 {
        font-family: var(--font-heading-1);
        font-size: clamp(1.5rem, 1.5rem + ((1vw - 0.2rem) * 1.565), 2.5rem);
        font-weight: 700;
        line-height: 1.3;
        color: var(--color-contrast);
        margin-bottom: var(--spacing-md);
        text-align: center;
    }
    
    h2 {
        font-family: var(--font-heading-2);
        font-size: clamp(0.929rem, 0.929rem + ((1vw - 0.2rem) * 0.739), 1.4rem);
        font-weight: 400;
        line-height: 1.3;
        color: var(--color-contrast);
        text-align: center;
        margin-top: 0;
        margin-bottom: var(--spacing-lg);
    }
    
    .video-transcript-grid {
        display: flex;
        gap: var(--spacing-xl);
    }
    
    .video-section {
        flex: 1;
        position: sticky;
        top: var(--spacing-xl);
        height: fit-content;
    }
    
    .video-container {
        position: relative;
        width: 100%;
        padding-top: 56.25%; /* 16:9 Aspect Ratio */
        background-color: #000;
        margin-bottom: var(--spacing-md);
        border-radius: 5px;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    
    .video-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: none;
    }
    
    .transcript-section {
        flex: 1;
        max-height: 80vh;
        overflow-y: auto;
        border: 1px solid var(--color-accent-1);
        border-radius: 5px;
        padding: var(--spacing-md);
        background-color: var(--color-accent-5);
    }
    
    .transcript-segment {
        margin-bottom: var(--spacing-md);
        padding: var(--spacing-md);
        border-radius: 5px;
        background-color: #fff;
        cursor: pointer;
        transition: background-color 0.2s, border-left 0.2s;
        border-left: 2px solid transparent;
    }
    
    .transcript-segment:hover {
        background-color: var(--color-accent-1);
    }
    
    .transcript-segment.active {
        background-color: var(--color-accent-1);
        border-left: 4px solid var(--color-accent-2);
    }
    
    .segment-time {
        font-size: var(--font-size-small);
        color: var(--color-accent-4);
        font-weight: 500;
        margin-bottom: var(--spacing-sm);
    }
    
    .segment-text {
        font-size: var(--font-size-medium);
        margin-bottom: var(--spacing-sm);
        color: var(--color-contrast);
        font-family: var(--font-primary);
    }
    
    /* Mobile responsive */
    @media (max-width: 768px) {
        .video-transcript-grid {
            flex-direction: column;
        }
        .video-section {
            position: sticky;
            top: 0;
            width: 100%;
            z-index: 10;
            background-color: var(--color-base);
            padding-bottom: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
        }
        .transcript-section {
            width: 100%;
        }
        .transcript-container {
            padding: var(--spacing-md);
        }
    }
</style>

<div class="transcript-container">
    <h1>{{ .Title }}</h1>
    <h2>{{ .Params.subtitle }}</h2>
    
    <div class="video-transcript-grid">
        <div class="video-section">
            <div class="video-container">
                <iframe id="youtube-player" 
                    src="https://www.youtube.com/embed/{{ .Params.youtube_id }}?enablejsapi=1" 
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen>
                </iframe>
            </div>
        </div>
        
        <div class="transcript-section" id="transcript-container">
            <!-- Transcript segments will be loaded here by JavaScript -->
        </div>
    </div>
</div>

<!-- Transcript data and functionality -->
<script>
    // Hard-coded transcript data for the full teaching
    const transcriptData = [
        {
            id: 1,
            start: 18.78,
            end: 52.06,
            text: "So if your question now, what I'm doing here is, if you question now, what I'm doing here, I'm sitting on a chair, or I'm listening. I'm listening, I'm listening. Crazy Talk. Crazy Talk. Nonsense, nonsense. Chris talk. Anyway, I'm sitting on chair. Oh, I'm listening talk."
        },
        {
            id: 2,
            start: 62.20,
            end: 100.72,
            text: "They say 8880 from Nepal. 80 a snowball man, Snowball man from Nepal, anyway, talking from the throne. Anyway, so snowball man from the Mount Everest. Anyway."
        },
        {
            id: 3,
            start: 113.02,
            end: 133.44,
            text: "So I am listening talk, or I'm sitting on chair. I okay, well, I'm sitting wrong, giving talk. Okay, crazy, crazy talk. Oh."
        },
        {
            id: 4,
            start: 140.00,
            end: 179.26,
            text: "It so we see, I am a student chair or the resident talk. We see, so real. I see, believe it, the appearance is real. I see, also mentioned the day you see rely, abiding or existing in this body. In this body you see abiding this body."
        },
        {
            id: 5,
            start: 189.66,
            end: 239.38,
            text: "So without examining then see the natural belief that this, you know, in the in, as I mentioned, obviously, in the inside the chest, not in the stomach, not in the stomach, not, not in the stomach. What is all the junks? Well, chunks of the junk, junk, you were junk. If lunch or dinner, then so not at the stomach with food or the junk with the poo, poo, not there, but"
        },
        {
            id: 6,
            start: 240.40,
            end: 264.14,
            text: "not not inside, not inside the head, not here, inside the head, inside the face, inside the chest, somewhere there. So anyway, this one we're not examining. See, there's a real idea. And then that real I sit on chair and listening, listening talk. So,"
        },
        {
            id: 7,
            start: 269.12,
            end: 301.32,
            text: "so then, what are you say? See, why? Why believe? I said? Why? Why believe? Why say this? I am a student chair, you know, listen talk. Why say this? Why believe this? See the answer. That answer says there's nothing else, no other reason at all, not the reason at all, except the aggregates the body is action. Doing action, sitting."
        },
        {
            id: 8,
            start: 305.04,
            end: 338.12,
            text: "So, so that's it. You know, that's it. Why that's it? Then believe I label and believe I am sitting on a chair. That's it. Or the aggregates, aggregates the mind sense of ear is paying attention to recent talk. So the base, the aggregates, the aggregate base sense"
        },
        {
            id: 9,
            start: 339.74,
            end: 394.94,
            text: "they consider the ear. Pay attention to talk. That's it. Nothing else. There's nothing else other than that. You know why I say, why I believe I'm saying? You know, listening teaching, nothing else. There's not the reason at all. Nothing else, nothing more than that. So, hmm, so when you So, when you think the reason, when you think this reason, when you put a reason. I see why you believe what you say. I'm sitting on chair or listening talk you see So, relating to the eye case, relating to the based eye case, what function it does, that's it."
        },
        {
            id: 10,
            start: 395.96,
            end: 460.60,
            text: "Nothing else, nothing else, but that you hmm, that's it. No other reason at all. So when you think, when you think the base to be labeled with, the base to be labeled is the aggregates existing, and then during function, during function, sitting the body during function, sitting and the sense the ears, paying attention, Photography. So you think that, we just think that"
        },
        {
            id: 11,
            start: 462.76,
            end: 496.14,
            text: "then that real, I, what you should believe before appears and you believe is true. You see, so, so basically, you know It's gone. You see, not there, nonexistent."
        },
        {
            id: 12,
            start: 502.86,
            end: 552.54,
            text: "Do that real eye, you know, before sitting and listening, not there, Gone was not gone out, not gone, not gone in the car, you know, went out to the drawers in the car, escaped none that see, you know, doesn't exist there see In the view your mind suddenly is suddenly see, total change to your mind, your perception, total change. See,"
        },
        {
            id: 13,
            start: 555.90,
            end: 598.36,
            text: "suddenly there's huge differences that what is believed by the wrong concept ignorance. There's a real idea inside this body of the you know on this, I guess you see existing problems inside, not me, level by mind. You see, there was strong beliefs. Is true. They were so strongly, 100% believed. See, suddenly, not there. I It suddenly doesn't exist. I."
        },
        {
            id: 14,
            start: 719.92,
            end: 780.28,
            text: "So Just you know, just mind made it up. Mind made it up the label. I just mind made up the label I and believed mind merely imputed I and believe in that you see, and its function, and it and then, merely imputed the action, it is mind merely imputing I self, and then merely imputing the action, the function, sitting, listening talk, all that merely imputed by Mind. You see, mind just made it up. Just a man just made up the label. And immediately, I immediately action, sitting on chair, I listen talk. That's it, that's it, that's it. Nothing else."
        },
        {
            id: 15,
            start: 781.66,
            end: 822.70,
            text: "Oh, mm, is something which came from the mind, relating to the aggregates then mind you see, just made up the label I name is immediately action, medium to action, listening and listening talk or sit on chair. So that's it. So believe that you see."
        },
        {
            id: 16,
            start: 827.80,
            end: 870.56,
            text: "So there's nothing wrong. So therefore, so therefore, that's what it exists. That's what it exists. Therefore the other one, the other one that you believe before, before examining, you know, why? Why say why I believe I'm why I believe I'm sitting, I'm listening, see, I say so after you put reasons. You know, like relating to aggregates, nothing else related. What? What did they do? That's it. That's it. Ah."
        },
        {
            id: 17,
            start: 880.00,
            end: 925.88,
            text: "And so some you know different phenomena. This different phenomena, their body, I guess, body during action, sitting then the mind is this sense, sense of years. The conscience you know paying attention to talk so different phenomena. The reason is, you should use different phenomena, another phenomena. So that's it, nothing else than that. So,"
        },
        {
            id: 18,
            start: 932.48,
            end: 972.18,
            text: "so you see here now, what you what appeared, what you believe before a real eye. You know, real eye, in the sense, existing from a society inside this body, okay, on the on this body. On this eye gets, on this eye gets from above. This eye gets there's a real eye, the sense, existing from the side, not me, level by mind, you know, and believed, believed you see, was a mind that's true. So"
        },
        {
            id: 19,
            start: 973.44,
            end: 1022.16,
            text: "that, so that, so that you know that that's not there, that none, none existence. So that, so that, so it proves so it proves so it proves that pretty much concept is wrong. Appearance is hallucination, the previous appearance. You say hallucination, false for that false false, I say view of the false eye, the previous one. That's a false eye. View of false eye. That's the objective, reputed"
        },
        {
            id: 20,
            start: 1023.84,
            end: 1062.10,
            text: "gakcha and the mind which believes that's true. That's ignorance. That's ignorance, root of samsara, root of all the root of all the delusions, from all the delusions and karma, all the from where that from, where which results, which results suffering, death, which results suffering. But you know, all the old ages, sicknesses, and dissatisfactions, all the mental, physical problems, so everything which results for that see,"
        },
        {
            id: 21,
            start: 1066.66,
            end: 1120.42,
            text: "so the oceans of human beings suffering. You know, oceans of Sura Asura, helping animals, individuals, all these oceans of all they suffer, all those real sufferings. She comes so from this, from this, from this very nonsense, from this nonsense. Mind, this mind concept nonsense, you know, child, childish nonsense, nonsense, concept nonsense, you know nonsense, totally, total, no meaning you know this, believing I which doesn't exist, believing I so which doesn't exist, It will not there. So believe is"
        },
        {
            id: 22,
            start: 1121.86,
            end: 1163.36,
            text: "the root of ignorance, the root of all, for where all the delusion comes, you know, all the wrong concepts, the 60 root delusion trend. I mean the elaborating the eight of 1000 delusion. Hyper the Buddha taught eight of 1000 8 of 1000 Dharma, teaching the remedy to eight of 1000 delusions, However, so you know, yeah, so from This, this concept. Steve"
        },
        {
            id: 23,
            start: 1170.50,
            end: 1206.12,
            text: "Yeah, believing, bleeping, ah, the hallucination you see there's a real eye inside this body or on the on this, I guess it. Existing from society, not merely labeled by not merely labeled by mind, so"
        },
        {
            id: 24,
            start: 1216.38,
            end: 1269.36,
            text: "you see, and it's truly, truly, you know, absolutely, completely believe this Truth, completely believe in trust this 100% no doubt, by the ignorance by this concept. But this concept is wrong concept ignorance. Because why it's ignorance? Because there's no such idea as it appeared. Believed, there's nothing there, not in even the atom of even the atom of that doesn't exist."
        },
        {
            id: 25,
            start: 1270.74,
            end: 1323.90,
            text: "There's no atom of that exist in this body, or in this body, or on these areas. No way you can find i Okay, so, just just very simple, just very simple meditation, very simple meditation. This your question to yourself, then user, then you use the reason you see, why? Why I believe? Why say, you know, I'm sitting chair and listen, teaching, see, then the related aggregates, what function? Again, does that said? Nothing else, nothing more than that."
        },
        {
            id: 26,
            start: 1336.80,
            end: 1388.58,
            text: "Can't, can't find anything that see. Hmm, so then, see, just about that. Then the you see the previous, the real eye, you know, this body in the appearance, believed during the securities. Oh, you see, you discover, see, non existent. I unexistent, confined, so, so this is one this is one manifestation, one technique that can use, can use to, can use you see, to recognize the gakcha object to be refuted."
        },
        {
            id: 27,
            start: 1413.68,
            end: 1453.44,
            text: "So now here, then you recognize the privilege one that there was a real eye, and you see, during all this real action of listening and real action of sitting on chair, see the object which is a False the Yeah, which doesn't exist at all. So to recognize the object we refuted today, it helps, then the letter, then let when you then let her, then let her say, when your mind, just take your mind staying this reason, as long as we understand this, this reason You see, maintaining the reason it helps there,"
        },
        {
            id: 28,
            start: 1481.96,
            end: 1530.80,
            text: "to not, to not see that real. I you know the existence from side appearing that is the belief to not look, to not look at that. And then. But when your mind distracted, when your mind is distracted from these concentration, then they come back. You see a real eye in this body. And rely, to make it short, in the real eye, the sense existing from society. See on this, on this, I guess, from above this, I guess believed by one's mind, by the ignorance, you see, that 100% true,"
        },
        {
            id: 29,
            start: 1531.16,
            end: 1583.90,
            text: "so that so, so you again, so again, you question. See, oh, they put you put the reason relating to, I guess you know, relating to the different, not different phenomena there, I could get to see what actually does. Then, when you do that, when you when you use this reason, you see. So then again, that false I not there in the view your mind, so that, so you're able to help to able to recognize the object, to be refuted the gakcha you see, so that, so more and more you're able to also say, Hmm,"
        },
        {
            id: 30,
            start: 1585.40,
            end: 1621.68,
            text: "this is what. This is what doesn't exist at all. See, the more you're able to recognize the false i, then it's a, then it's a, then it is a minute, then it is a minute. See, to realize it is empty. It is it is empty, totally empty as it is empty, totally non accident, as it is Total, non accident, so empty, So that, so The i"
        },
        {
            id: 31,
            start: 1651.28,
            end: 1700.90,
            text: "i [Period of silence] Or maybe a little bit meditation, very short While say, so you"
        },
        {
            id: 32,
            start: 1732.60,
            end: 1789.78,
            text: "so when the body is sitting and I guess the body is doing the action sitting, the the mind is the mind the sense of the air, the consciousness is listening, then, Then, then, the mind seeing that just merely imputed. I just just made up the label I then see and the actions of the eye, meeting the walking, sitting or sitting or listening just the merely imputed, but merely by mind just being imputed by mind. Believe that That's it. Nothing else."
        },
        {
            id: 33,
            start: 1796.32,
            end: 1836.14,
            text: "So, so. I, which is so i, which is existing, the self I which exists, is something. It is something unbelievable, unbelievable. Subtle. Unbelievable, subtle. What? How the I Exist, what it is or what is self is something unbelievable, subtle, unbelievable, subtle phenomena."
        },
        {
            id: 34,
            start: 1840.58,
            end: 1865.82,
            text: "It's like, doesn't exist. Is not it is not. It is not said it doesn't exist. But it's like that the light doesn't exist. Unbelievable, unbelievable, subtle. What's the eat? What's really to it? Unbelievable."
        },
        {
            id: 35,
            start: 1882.44,
            end: 1926.30,
            text: "Subtle. So mind just merely imputed the meditation, the subtle dependent arising going to prasangika school, Madhyama school, prasangika school, fourth school, Madhyama School, which is true thought under the school, prasangika school. So prasangika school view the dependent arising, this subtle dependent dependent arising, subtle dependent arising. I may immediately imputed it about the mind."
        },
        {
            id: 36,
            start: 1928.76,
            end: 1966.60,
            text: "So the minute to mental exactly to meditate, concentrate exactly in the meaning of that is extremely important. Not, not just, not just say, oh, immediately by mind, it just leave it. Not like that, you know, you just throw the words under it. You just throw the words and then you don't manage it. Doesn't help. You see, one has to meditate Exactly. One has to one has to meditate exactly on the words. Then Then, then it's really, then it's then it's unbelievable, fantastic."
        },
        {
            id: 37,
            start: 1976.32,
            end: 2010.38,
            text: "Then you come to know that how subtle it is, the cells are. You see. So like that. So, so you get the first example how it is so extremely subtle. You know, it exists, but it's extremely fine, unbelievable, subtle. Light doesn't exist, so like that. So once you get it, once you get that clear experience of this, then all"
        },
        {
            id: 38,
            start: 2011.88,
            end: 2061.92,
            text: "HF, I guess each of the targets, the same in their body and mind, all the rest of phenomena like that, hell, enlightenment, SAMSA, nivana, happiness, problem, all, there is a phenomenon like that. See, it's all empty. It's all everything was, everything. What you think real, everything what you think, what do you believe, real for real from a society. I say, everything, what you everything, what appears, what you believe it is there. It is there on the base. Is everything there on the base. See which is also labeled by your medieval, by your mind. So it's not there."
        },
        {
            id: 39,
            start: 2065.46,
            end: 2099.92,
            text: "Everything is not there on the base, not there on the base as appeared as you believe. It's not true at all. Everything, everything are totally you see, empty, the mere mere conception, see, merely merely believe. It merely merely believed. That's it, nothing else, even the base, when you say label, is immediately by mind, believed, see, that's it. So."
        },
        {
            id: 40,
            start: 2100.00,
            end: 2141.02,
            text: "Ah. So you can see everything came from the mind, even the mind itself. So everything is empty. Empty means do not exist from their own side. I action object, I do not exist from side. Action do not exist from side. Object do not exist from side. Everything do not exist. Everything do not exist from the outside. Everything are totally empty"
        },
        {
            id: 41,
            start: 2152.66,
            end: 2204.44,
            text: "just A minute Liberty here I the first I empty, then second action, third objects. So meditate, meditate like that. First I empty, 10 actions, then your actions, all the activities, then All the objects, okay, maintain like that. Enter This. I"
        }
    ];
    
    // Format time (seconds) to MM:SS
    function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = Math.floor(seconds % 60);
        return `${String(minutes).padStart(2, '0')}:${String(remainingSeconds).padStart(2, '0')}`;
    }
    
    // Create transcript segments
    function renderTranscript() {
        const container = document.getElementById('transcript-container');
        
        transcriptData.forEach(segment => {
            const div = document.createElement('div');
            div.className = 'transcript-segment';
            div.setAttribute('data-id', segment.id);
            div.setAttribute('data-start', segment.start);
            
            div.innerHTML = `
                <div class="segment-time">${formatTime(segment.start)} - ${formatTime(segment.end)}</div>
                <div class="segment-text">${segment.text}</div>
            `;
            
            div.addEventListener('click', () => {
                if (window.player && window.player.seekTo) {
                    window.player.seekTo(segment.start);
                    window.player.playVideo();
                    
                    // Update active segment
                    const segments = document.querySelectorAll('.transcript-segment');
                    segments.forEach(s => s.classList.remove('active'));
                    div.classList.add('active');
                }
            });
            
            container.appendChild(div);
        });
    }
    
    // YouTube API functionality
    function onYouTubeIframeAPIReady() {
        window.player = new YT.Player('youtube-player', {
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
        console.log("YouTube API Ready");
    }
    
    function onPlayerReady(event) {
        console.log('YouTube player is ready');
    }
    
    function onPlayerStateChange(event) {
        if (event.data === YT.PlayerState.PLAYING) {
            startTimeTracking();
        } else {
            stopTimeTracking();
        }
    }
    
    let trackingInterval;
    
    function startTimeTracking() {
        stopTimeTracking();
        trackingInterval = setInterval(() => {
            if (window.player && window.player.getCurrentTime) {
                const currentTime = window.player.getCurrentTime();
                highlightCurrentSegment(currentTime);
            }
        }, 500);
    }
    
    function stopTimeTracking() {
        if (trackingInterval) {
            clearInterval(trackingInterval);
        }
    }
    
    function highlightCurrentSegment(currentTime) {
        const segments = document.querySelectorAll('.transcript-segment');
        
        for (let i = 0; i < transcriptData.length; i++) {
            const segment = transcriptData[i];
            const end = (i < transcriptData.length - 1) ? transcriptData[i + 1].start : segment.end;
            
            if (currentTime >= segment.start && currentTime < end) {
                segments.forEach(s => s.classList.remove('active'));
                const activeSegment = document.querySelector(`.transcript-segment[data-id="${segment.id}"]`);
                if (activeSegment) {
                    activeSegment.classList.add('active');
                }
                break;
            }
        }
    }
    
    // Load YouTube API
    function loadYouTubeAPI() {
        const tag = document.createElement('script');
        tag.src = 'https://www.youtube.com/iframe_api';
        const firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    }
    
    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
        renderTranscript();
        loadYouTubeAPI();
    });
</script>
{{ end }}